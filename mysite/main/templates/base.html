<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <title>HackUMBC: Room Availability</title>
    <link href="../static/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="static/dist/js/bootstrap.bundle.min.js"></script>   
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript" src="static/jquery.imagemapster.js?v1.2.10"></script>
    <script type="text/javascript" src="static/jquery.imagemapster.js"></script>
    <link rel="canonical" href="https://getbootstrap.com/docs/5.2/examples/navbar-fixed/">

    <!-- Custom styles for this template -->
    <link href="static/stylesheet.css" rel="stylesheet">
  </head>
  <body>
    <!-- NAVBAR -->   
    <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark" style="padding-top:1.5rem;padding-bottom:1.5rem;">
      <div class="container">
        <a class="d-flex" style="max-width:10rem; min-wdith:2rem; max-height: 3rem; margin-right:1rem;" href="#"><img class="img-fluid" alt="Responsive image" src="static/UMBC-primary-logo-CMYK-on-black.png"</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarCollapse">
          <ul class="navbar-nav me-auto mb-2 mb-md-0 center">
            <li class="nav-item">
              <a class="nav-link" href="https://umbc.edu/about/visit/directions/">Other UMBC Maps</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- BODY CONTAINER -->
    <main class="container">
      <h1><b>UMBC: Room Availability</b></h1>
      <!-- DATE (change based on current date)-->
      <h2 id ="date_output"></h2>
      <i><p id="output"></p></i>

      <!-- ACCORDION BUILDING DROP DOWN -->
      {% for building,value in extraContext.items %}
        <button id="acc_text" class="accordion">{{building}}</button>
        <div class="panel">
          {% for roomNum in value %}
            {% if roomNum.availUntil > 0 %}
              <button class="status_btn_green"></button> <p style="display:inline">{{roomNum}}</p>
            {% else %}
            <button class="status_btn_red"></button> <p style="display:inline">{{roomNum}}</p>
            {% endif %}
            <p style="display:flex"></p>
          {% endfor %}
        </div>
      {% endfor %}

      <!--MAP-->
      <!-- TEXT (DATE AND UPDATE TIME)-->
      <div class="container" id="selections" style="margin-bottom:2rem;">
          <h3 style="margin-top: 4rem;">UMBC Map</h3>
      </div>
      <div class="map-container">
        <!-- Image Map shapes Generated by http://www.image-map.net/ -->
          <img id="map-layout" class="alignnone size-full wp-image-66" alt="Responsive image" src="static/UMBC-campus-map.png" usemap="#image-map">

          <map id="veg_map" name="image-map">
              <area target="" alt="ITE_BUILDING" name="ITE_BUILDING" data-name="ITE_BUILDING,all" title="ITE_BUILDING" href="" coords="435,836,531,947" shape="rect" style="background-color:blue;">
              <area target="" alt="ENGINEER_BUILDING" name="ENGINEER_BUILDING" data-name="ENGINEER_BUILDING,all" title="ENGINEER_BUILDING" href="" coords="435,705,526,805" shape="rect">
              <area target="" alt="FINE_ART_BUILDING" name="FINE_ART_BUILDING" data-name="FINE_ART_BUILDING,all" title="FINE_ART_BUILDING" href="" coords="432,572,531,682" shape="rect">
              <area target="" alt="MEYERHOFF_BUILDING" name="MEYERHOFF_BUILDING" data-name="MEYERHOFF_BUILDING,all" title="MEYERHOFF_BUILDING" href="" coords="561,572,659,685" shape="rect">
              <area target="" alt="UNIVERSITY_CENTER" name="UNIVERSITY_CENTER" title="UNIVERSITY_CENTER" href="" coords="558,699,654,809" shape="rect">
              <area target="" alt="SHERMAN_HALL" name="SHERMAN_HALL" title="SHERMAN_HALL" href="" coords="561,829,661,931" shape="rect">
              <area target="" alt="SONDHEIM_BUILDING" name="SONDHEIM_BUILDING" title="SONDHEIM_BUILDING" href="" coords="686,829,727,927" shape="rect">
              <area target="" alt="MATH_PSYCHOLOGY_BUILDING" name="MATH_PSYCHOLOGY_BUILDING" title="MATH_PSYCHOLOGY_BUILDING" href="" coords="692,701,728,806" shape="rect">
              <area target="" alt="BIOLOGICAL_BUILDING" name="BIOLOGICAL_BUILDING" title="BIOLOGICAL_BUILDING" href="" coords="682,497,727,679" shape="rect">
              <area target="" alt="LECTURE_HALL_1"name="LECTURE_HALL_1" title="LECTURE_HALL_1" href="" coords="736,580,780,619" shape="rect">
              <area target="" alt="PERFORMING_ARTS_BUILDING" name="PERFORMING_ARTS_BUILDING" title="PERFORMING_ARTS_BUILDING" href="" coords="123,606,374,762" shape="rect">
              <area target="" alt="ADMIN_BUILDING" name="ADMIN_BUILDING" title="ADMIN_BUILDING" href="" coords="593,956,676,1015" shape="rect">
              <area target="" alt="ISLB_BUILDING" name="ISLB_BUILDING" title="ISLB_BUILDING" href="" coords="876,666,993,734" shape="rect">
              <area target="" alt="PHYSICS_BUILDING" name="PHYSICS_BUILDING" title="PHYSICS_BUILDING" href="" coords="1038,498,1100,598" shape="rect">
              <area target="" alt="PUBLIC_POLICY_BUILDING" name="PUBLIC_POLICY_BUILDING" title="PUBLIC_POLICY_BUILDING" href="" coords="1029,371,1139,421" shape="rect">
          </map>

          <div id="map-caption" style="clear:both;border: 1px solid black; width: 400px; padding: 6px; display:none;">
            <div id="map-caption-header" style="font-style: italic; font-weight: bold; margin-bottom: 12px;"></div>
            <div id="map-caption-text"></div>
          </div>
        </div>

    <!-- FOOTER -->
      <div class="container">
        <footer class="d-flex flex-wrap justify-content-between align-items-center py-3 my-4 border-top">
          <div class="col-md-4 d-flex align-items-center">
            <a href="/" class="mb-3 me-2 mb-md-0 text-muted text-decoration-none lh-1" >
              <img class="img-fluid" alt="Responsive image" src="static/UMBC-primary-logo-CMYK.svg" style="width:4rem">
            </a>
            <span class="mb-3 mb-md-0 text-muted">&copy; 2022 Company, Inc</span>
          </div>
      
          <ul class="nav col-md-4 justify-content-end list-unstyled d-flex">
            <li class="ms-3"><a class="text-muted" href="#"><svg class="bi" width="24" height="24"><use xlink:href="#twitter"/></svg></a></li>
            <li class="ms-3"><a class="text-muted" href="#"><svg class="bi" width="24" height="24"><use xlink:href="#instagram"/></svg></a></li>
            <li class="ms-3"><a class="text-muted" href="#"><svg class="bi" width="24" height="24"><use xlink:href="#facebook"/></svg></a></li>
          </ul>
        </footer>
      </div>
    </main>

    <!-- JS for time -->
    <script>
      var today = new Date();
      var month = today.getMonth();
      var day = today.getDay();
      var day_num = today.getDate();
      var daylist = ["Sunday","Monday","Tuesday","Wednesday ","Thursday","Friday","Saturday"];
      var monthlist = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"]
      var hour = today.getHours();
      var minute = today.getMinutes();
      var second = today.getSeconds();
      var prepand = (hour >= 12)? " PM ":" AM ";
      hour = (hour >= 12)? hour - 12: hour;
      if (hour===0 && prepand===' PM ') 
      { 
      if (minute===0 && second===0)
      { 
      hour=12;
      prepand=' Noon';
      } 
      else
      { 
      hour=12;
      prepand=' PM';
      } 
      } 
      if (hour===0 && prepand===' AM ') 
      { 
      if (minute===0 && second===0)
      { 
      hour=12;
      prepand=' Midnight';
      } 
      else
      { 
      hour=12;
      prepand=' AM';
      } 
      } 
      const day_time = daylist[day] + ". " + monthlist[month] + " " + day_num + ", " + today.getFullYear();
      const time = "Current Time : "+hour  + ":" + minute + " " + prepand;
      document.getElementById('output').innerHTML = time;
      document.getElementById('date_output').innerHTML = day_time;
     </script>

     <!-- Map JS/JQuery-->
      <script>
        var inArea,
        map = $('#map-layout'),
        captions = {
          ITE_BUILDING: ["ITE_BUILDING"],
          ENGINEER_BUILDING: ["ENGINEER_BUILDING"],
          FINE_ART_BUILDING: ["FINE_ART_BUILDING"],
          MEYERHOFF_BUILDING: ["MEYERHOFF_BUILDING"]
        },
        single_opts = {
            fillColor: '000000',
            fillOpacity: .4,
            stroke: true,
            strokeColor: 'ff0000',
            strokeWidth: 2
        },
        all_opts = {
            fillColor: '000000',
            fillOpacity: 0.6,
            stroke: true,
            strokeWidth: 2,
            strokeColor: '000000',
        },
        initial_opts = {
            mapKey: 'data-name',
            singleSelect: true,
            onMouseover: function (data) {
                inArea = true;
                $('#map-caption-header').text(captions[data.key][0]);
                $('#map-caption-text').text(captions[data.key][1]);
                $('#map-caption').show();
            },
            onMouseout: function (data) {
                inArea = false;
                $('#map-caption').hide();
            }
        };
        opts = $.extend({}, all_opts, initial_opts, single_opts);
        
        map.mapster('unbind')
            .mapster(opts)
            .bind('mouseover', function () {
                if (!inArea) {
                    map.mapster('set_options', all_opts)
                        .mapster('set', true, 'all')
                        .mapster('set_options', single_opts);
                }
            }).bind('mouseout', function () {
                if (!inArea) {
                    map.mapster('set', false, 'all');
                }
            });
      </script>

    <!-- SCRIPT FOR ACCORDION DROPDOWN -->
    <script>
      var acc = document.getElementsByClassName("accordion");
      var i;
      
      for (i = 0; i < acc.length; i++) {
        acc[i].addEventListener("click", function() {
          this.classList.toggle("active");
          var panel = this.nextElementSibling;
          if (panel.style.display === "block") {
            panel.style.display = "none";
          } else {
            panel.style.display = "block";
          }
        });
      }
      </script>
  </body>
</html>
